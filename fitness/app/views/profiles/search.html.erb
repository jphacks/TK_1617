<div class ="container">
 <div class="list-group">
  <a href="#" class="list-group-item active">検索結果　一覧</a>
    <% @profiles.each do |profile| %>
      <% if profile.user_id != current_user.id%>
        <a href="/profiles/<%= profile.id %>" class="list-group-item">
         <div class="row">

              <div class="col-sm-4">
                <p><h2><%= profile.name %></h2></p>
                <h2><%=profile.comment%></h2>
                <table class="table table-inverse table-bordered">
                  <thead>
                    <tr>
                      <th>ベンチプレス</th>
                      <th>フルスクワット</th>
                      <th>デッドリフト</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td>
                        <% if User.find(profile.user_id).muscle_diaries.where(diary_date: DateTime.now - 3.month...DateTime.now + 1.day).where(event_id: Event.find_by(event_name: 'ベンチプレス').id).maximum(:weight) != nil %>
                            <%= User.find(profile.user_id).muscle_diaries.where(diary_date: DateTime.now - 3.month...DateTime.now + 1.day).where(event_id: Event.find_by(event_name: 'ベンチプレス').id).maximum(:weight) %>
                        <%end%>
                      </td>
                      <td>
                        <% if User.find(profile.user_id).muscle_diaries.where(diary_date: DateTime.now - 3.month...DateTime.now + 1.day).where(event_id: Event.find_by(event_name: 'フルスクワット').id).maximum(:weight) != nil %>
                            <%= User.find(profile.user_id).muscle_diaries.where(diary_date: DateTime.now - 3.month...DateTime.now + 1.day).where(event_id: Event.find_by(event_name: 'フルスクワット').id).maximum(:weight) %>
                        <%end%>
                      </td>
                      <td>
                        <% if User.find(profile.user_id).muscle_diaries.where(diary_date: DateTime.now - 3.month...DateTime.now + 1.day).where(event_id: Event.find_by(event_name: 'デッドリフト').id).maximum(:weight) != nil %>
                            <%= User.find(profile.user_id).muscle_diaries.where(diary_date: DateTime.now - 3.month...DateTime.now + 1.day).where(event_id: Event.find_by(event_name: 'デッドリフト').id).maximum(:weight) %>
                        <%end%>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>
              <% if profile.address != nil %>
                <div class="col-sm-2">
                  <h2><%= profile.address %></h2>
                </div>
              <%else%>
                <div class="col-sm-2"><h2>未設定</h2></div>

              <%end%>
              <% if profile.birthday != nil %>
                <div class="col-sm-2">
                  <h2><%= Time.now.year - profile.birthday.year %>歳<h2>
                </div>
              <%else%>
                <div class="col-sm-2"><h2>未設定</h2></div>

              <%end%>

              <% if profile.image? %>
                <div class="col-sm-4">
                  <%= image_tag profile.image.url, :size => '250x250', :class => 'img-responsive' %>
                </div>
              <%else%>
                <div class="col-sm-offset-4"></div>
                  <%= image_tag 'noimage.jpg', :size => '250x250' %>
              <% end %>

            </div>
        </a>
      <% end %>
    <% end %>
  </div>
</div>
